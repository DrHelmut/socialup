<div class="row" ng-if="searchVideoForm.selected">
    
    <div class="col-md-8 colg-lg-8">
        <div ts-video-player video-provider="{{searchVideoForm.selected.provider}}" video-id="{{searchVideoForm.selected.video.id}}"></div>
    </div>
    
    <div class="col-md-4 colg-lg-4" style="max-height:530px; overflow-y: auto;"> 
        
        <span ng-if="searchVideoForm.playlist.length===0"> Playlist vide </span>
        <ul ng-if="searchVideoForm.playlist.length>0" dnd-list="searchVideoForm.playlist">
            <li ng-repeat="element in searchVideoForm.playlist"
                dnd-draggable="element"
                dnd-moved="searchVideoForm.playlist.splice($index, 1)"
                dnd-effect-allowed="move"
                dnd-selected="setSelected(element)"               
                ng-class="{selected: getPlaylistIndex(searchVideoForm.selected) === $index}" >
                <div class="row">
                    <div class="col-md-3">
                        <img ng-src="{{element.video.thumbnailURL}}" style="max-height:60px; max-width:80px">
                    </div>
                    <div  class="col-md-9">
                        <h5 style="margin-top:0px;">{{element.video.title}}</h5>
                        <h6 style="margin-bottom:0px;">{{element.video.channel}}</h6>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</div>
 
    
<div class="input-group" style="margin-top:20px;">
    <span class="input-group-addon">Trier par :</span>
    <select class="form-control" ng-model="searchVideoForm.order" ng-options="option.label for option in searchVideoForm.orders"></select>
    <span class="input-group-addon">Titre :</span>
    <input type="text" class="form-control" ng-model="searchVideoForm.videoName" placeholder="Vidéo à rechercher" value="Title"/>
    <span class="input-group-addon">Résultats / page</span>
    <input type="number" class="form-control" ng-model="searchVideoForm.limit" min="10" max="50" step="5" placeholder="Limite" value="Limit"/>
    <span class="input-group-btn">
        <button id="signInButt" class="btn btn-primary" ng-click="searchVideo()">Rechercher</button>
    </span>
</div>

<div class="row" style="margin-top:20px;">
    
    <uib-tabset ng-if="!isEmpty(searchVideoForm.results)" class="panel panel-default">
        <uib-tab ng-repeat="provider in providers">
            <uib-tab-heading>
                <span>{{provider}}</span> ({{searchVideoForm.results[provider].totalResults}})
            </uib-tab-heading>
            
            <div class="panel-body" style="max-height:600px; overflow-y: auto;">
                 <table st-table="searchVideoForm.results[provider].videos" class="table table-striped">
                    <tbody>
                        <tr ng-repeat="video in searchVideoForm.results[provider].videos" ng-click="addToPlaylist(provider, $index)">
                            <td><img ng-src="{{video.thumbnailURL}}" style="max-height:90px; max-width:120px"></td>
                            <td>
                                <p>{{video.title}}</p>
                                <p>
                                    {{video.counts.view}} vues&nbsp;
                                    <span ng-if="video.counts.like">
                                        {{video.counts.like}} <i class="glyphicon glyphicon-thumbs-up" style="color:green;"></i>&nbsp;
                                        <span ng-if="video.counts.dislike">{{video.counts.dislike}} <i class="glyphicon glyphicon-thumbs-down" style="color:red;"></i></span>
                                    </span>
                                </p>
                                <h6 style="margin-bottom:0px;">{{video.channel}}</h6>
                            </td>            
                            <td>
                                <p>{{video.description}}</p>
                            </td>
                            <td>
                                <h6>{{video.creationDate | date:"dd/MM/yyyy'&nbsp;'HH'h'mm" }}</h6>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="text-center" style="margin-top:5px; margin-bottom:10px;">

                <hr/>                
                <span ng-if="searchVideoForm.results[provider].prevPageToken">                                    
                    <button type="button" ng-click="searchVideoForm.changeStep(provider, 'backward')" class="btn btn-sm btn-primary" uib-tooltip="Résultats précédents">
                        <i class="glyphicon glyphicon-step-backward"></i>
                    </button>                               
                </span>                                
                <span ng-if="!searchVideoForm.results[provider].page">
                    &nbsp;<label> - </label>&nbsp;
                </span>                                
                <span ng-if="searchVideoForm.results[provider].nextPageToken">                                    
                    <button type="button" ng-click="searchVideoForm.changeStep(provider, 'forward')" class="btn btn-sm btn-primary" uib-tooltip="Résultats suivants">
                        <i class="glyphicon glyphicon-step-forward"></i>
                    </button>
                </span>

                <span ng-if="searchVideoForm.results[provider].page">
                    <uib-pagination 
                        total-items="searchVideoForm.results[provider].totalPages" 
                        items-per-page="10" 
                        max-size="10" 
                        ng-model="searchVideoForm.currentPage" 
                        ng-change="searchVideoForm.changePage(provider)" 
                        boundary-links="true" 
                        previous-text="&lsaquo;" 
                        next-text="&rsaquo;" 
                        first-text="&laquo;" 
                        last-text="&raquo;"
                        ></uib-pagination>
                </span>                
            </div>            
            
        </uib-tab>
    </uib-tabset>

</div>